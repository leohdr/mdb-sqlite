/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */

apply plugin: 'java'
apply plugin: 'application'

mainClassName = "com.plausiblelabs.mdb.Main"

sourceCompatibility = 1.7
targetCompatibility = 1.7
tasks.withType(JavaCompile) {
	options.encoding = 'UTF-8'
}

repositories {
    mavenCentral()
    jcenter()
}

dependencies {
    compile('org.xerial:sqlite-jdbc:3.23.1')
    compile('commons-lang:commons-lang:2.4')
    compile('commons-logging:commons-logging:1.1.1')
    compile('com.healthmarketscience.jackcess:jackcess:1.1.16')
    compile('junit:junit:4.6')
    // compile(fileTree(dir: 'lib', include: '*.jar'))
}

jar {
	configurations.runtime.each { println it.path }
    println "========="
    configurations.compile.each { println it.path }
    println "========="

    from {
        //添加依懒到打包文件
        //configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
        configurations.runtime.collect{zipTree(it)}
    }
    manifest {
        attributes 'Main-Class': "com.plausiblelabs.mdb.Main"
    }
}

task clearJar(type: Delete) {
    delete 'build/libs/lib'
}

task copyJar(type: Copy) {
    from configurations.runtime
    into('build/libs/lib')
}

task release(type: Copy, dependsOn: [build, clearJar, copyJar])
